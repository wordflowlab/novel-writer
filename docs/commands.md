# Novel Writer 斜杠命令详解

本文档详细介绍 Novel Writer 提供的所有斜杠命令，包括用法、参数和最佳实践。

## 命名空间说明

不同 AI 平台使用不同的命令格式：

| AI 平台 | 命令格式 | 示例 |
|---------|----------|------|
| **Claude Code** | `/novel.命令名` | `/novel.write` |
| **Gemini CLI** | `/novel/命令名` | `/novel/write` |
| **Cursor, Windsurf, Roo Code** 等 | `/命令名` | `/write` |

> 💡 **提示**：本文档中使用通用格式 `/命令名`，实际使用时请根据您的 AI 平台添加相应的命名空间前缀。

---

## 七步方法论命令

基于规格驱动开发（SDD）的系统化创作流程。

### 1. `/constitution` - 创作宪法

**用途**：定义最高层级的创作原则和价值观

**何时使用**：项目开始时，或需要调整核心创作理念时

**生成内容**：`.specify/memory/constitution.md`

**包含内容**：
- 核心创作理念
- 价值观和禁忌
- 质量标准
- 风格偏好

**使用示例**：
```
/novel.constitution 创建创作原则，强调：
1. 人物塑造优先于情节推进
2. 真实性高于戏剧性
3. 细节刻画要具体生动
4. 避免说教和刻意煽情
```

**最佳实践**：
- 宪法是所有后续决策的"最高法"
- 保持原则清晰、可执行
- 不要过于冗长，5-10条核心原则即可
- 定期回顾并在必要时更新

---

### 2. `/specify` - 故事规格

**用途**：像产品需求文档（PRD）一样精确定义故事

**何时使用**：宪法确立后，开始定义具体故事内容

**生成内容**：`stories/001-故事名/specification.md`

**包含内容**：
- 故事概念和核心冲突
- 目标读者和市场定位
- 主要角色和世界观
- 线索管理规格（v0.12.0+）
- 成功标准和验收条件

**使用示例**：
```
/novel.specify 创建一个都市奇幻小说规格：
- 核心概念：现代都市中隐藏的异能者社会
- 主角：25岁程序员，意外觉醒预知能力
- 核心冲突：主角被卷入异能者组织的权力斗争
- 目标读者：18-35岁，喜欢超能力和悬疑题材
```

**线索管理**（v0.12.0 新增）：
规格文档第五章包含完整的线索管理表格：
- **5.1 线索定义表**：定义所有线索ID、类型、优先级
- **5.2 线索节奏规划**：规划每条线索的活跃程度（⭐⭐⭐/⭐⭐/⭐）
- **5.3 线索交汇点规划**：预先规划交汇时机，避免AI随意发挥
- **5.4 伏笔管理表**：管理伏笔的埋设与揭晓
- **5.5 线索修改决策矩阵**：修改时的影响评估清单

**最佳实践**：
- 专注于"是什么"和"为什么"，而非"怎么做"
- 使用清晰的验收标准
- 为关键角色编写详细档案
- 明确核心冲突和主题

---

### 3. `/clarify` - 澄清决策

**用途**：通过交互式问答明确故事规格中的模糊点

**何时使用**：完成初版规格后，在制定计划前

**工作方式**：
1. AI 自动识别规格中的不明确之处
2. 通过 5 个精准问题进行澄清
3. 记录所有决策和理由
4. 更新规格文档

**使用示例**：
```
/novel.clarify
```

AI 可能会问：
- "主角的预知能力有什么限制？范围、精度、代价？"
- "异能者组织的结构是怎样的？有多少派系？"
- "故事的时间跨度是多久？章节数量预计多少？"

**最佳实践**：
- 认真回答每个问题，不要模糊带过
- 记录决策背后的理由
- 如果某些细节确实不确定，明确说明
- 完成后检查规格文档的更新

---

### 4. `/plan` - 创作计划

**用途**：基于明确的规格制定技术实现方案

**何时使用**：规格澄清完成后

**生成内容**：`stories/001-故事名/creative-plan.md`

**包含内容**：
- 章节结构设计（含活跃线索标记）
- 叙事技巧选择
- 节奏控制方案
- 伏笔铺设计划

**使用示例**：
```
/novel.plan 技术方案：
- 采用三幕结构
- 第一幕：1-20章，建立世界观和主角能力
- 第二幕：21-70章，主角卷入权力斗争
- 第三幕：71-100章，高潮和解决
- 使用第一人称视角，增强代入感
- 每5章设置一个小高潮
```

**章节段表格增强**（v0.12.0）：
- **活跃线索**列：标注每个章节段推进哪些线索（⭐⭐⭐主推进 / ⭐⭐辅助 / ⭐背景）
- **交汇点**列：明确交汇点所在章节

**最佳实践**：
- 像软件架构设计一样规划实现
- 考虑节奏和张弛有度
- 标注关键转折点
- 为伏笔设计埋设和回收计划

---

### 5. `/tasks` - 任务分解

**用途**：将创作计划分解为可执行的任务清单

**何时使用**：创作计划完成后

**生成内容**：`stories/001-故事名/tasks.md`

**包含内容**：
- 章节写作任务（优先级、预估字数、涉及线索）
- 角色完善任务
- 世界观补充任务
- 质量检查任务

**使用示例**：
```
/novel.tasks
```

**任务格式增强**（v0.12.0）：
每个写作任务包含：
- **涉及线索**：本章推进哪些线索及优先级（PL-01⭐⭐⭐、PL-02⭐⭐）
- **交汇点**：本章是否为交汇点（如 X-001）
- **伏笔埋设/揭晓**：本章涉及的伏笔操作

**最佳实践**：
- 任务应该具体、可执行
- 设置合理的优先级
- 预估字数帮助控制节奏
- 标注任务之间的依赖关系

---

### 6. `/write` - 章节写作

**用途**：基于任务清单进行 AI 辅助创作

**何时使用**：任务清单完成后，开始实际写作

**生成内容**：`stories/001-故事名/content/章节文件.md`

**工作方式**：
- 根据规格和计划创作
- 遵循创作宪法的原则
- 保持风格和角色一致
- 自动引用个人语料（如配置）
- 写作完成后验证角色名称（v0.6.0+）

**使用示例**：
```
/novel.write 第3章：觉醒
内容：主角在一次意外中觉醒预知能力，看到了即将发生的车祸
要求：
- 重点描写主角的心理变化
- 能力觉醒过程要有张力
- 字数：2000-2500字
```

**角色一致性验证**（v0.6.0）：
- 写作前：AI 会提醒注意角色名称和称呼
- 写作后：自动验证章节中的角色名称
- 发现错误时会提示并建议修正

**真实人声支持**（v0.8.4）：
若存在 `.specify/memory/personal-voice.md`，会自动引用个人语料保证表达的自然度。推荐配合 `/authentic-voice` 插件使用。

**最佳实践**：
- 每次写作一章，保持专注
- 明确本章的核心任务
- 注意与前文的衔接
- 写完后立即验证质量

---

### 7. `/analyze` - 智能综合验证

**用途**：根据创作阶段自动选择分析类型

**何时使用**：
- **框架分析**：write 之前，验证准备工作
- **内容分析**：write 之后（≥3章），验证作品质量

**智能模式切换**（v0.12.1）：

#### 模式 A：框架分析（章节数 < 3）
**验证内容**：
- 覆盖率分析：规格需求是否都有对应计划和任务
- 一致性检查：规格/计划/任务之间是否存在矛盾
- 逻辑预警：故事设计中的潜在漏洞
- 准备评估：是否可以开始写作

**使用示例**：
```
/novel.analyze
```
或强制指定：
```
/novel.analyze --type=framework
```

#### 模式 B：内容分析（章节数 ≥ 3）
**验证内容**：
- 宪法合规：是否符合创作原则
- 规格符合：是否满足规格要求
- 内容质量：逻辑、人物、节奏分析
- 改进建议：具体的 P0/P1/P2 修复建议

**使用示例**：
```
/novel.analyze
```
或强制指定：
```
/novel.analyze --type=content
```

**最佳实践**：
- 90% 情况让 AI 自动判断即可
- 重大修改后重新运行分析
- 认真对待 P0 级别的问题
- 记录改进建议并执行

---

## 追踪与验证命令

### `/track-init` - 初始化追踪系统

**用途**：首次使用追踪功能前的初始化

**何时使用**：完成故事大纲后，开始写作前

**生成内容**：
- `spec/tracking/plot-tracker.json` - 情节追踪
- `spec/tracking/timeline.json` - 时间线
- `spec/tracking/relationships.json` - 关系矩阵
- `spec/tracking/character-state.json` - 角色状态

**使用示例**：
```
/novel.track-init
```

**最佳实践**：
- 只需运行一次
- 后续使用其他追踪命令自动更新
- 定期备份追踪文件

---

### `/checklist` - 质量检查清单 ⭐新增

**用途**：生成质量检查清单，类似"需求的单元测试"

**何时使用**：
- **规格质量检查**：写作前验证规划文档质量
- **内容验证检查**：写作后扫描章节内容

**双保险机制**：
- 第一类：规格质量检查（写作前） - 验证文档本身的质量
- 第二类：内容验证检查（写作后） - 扫描实际写作内容

#### 第一类：规格质量检查（写作前）

类似"需求的单元测试"，验证规划文档质量：

| 类型 | 命令 | 检查维度 |
|------|------|----------|
| 大纲质量 | `/checklist 大纲质量` | 完整性、清晰度、一致性、可测量性、覆盖范围 |
| 角色设定 | `/checklist 角色设定` | 角色档案完整性、动机清晰度、一致性 |
| 世界观 | `/checklist 世界观` | 规则完整性、设定清晰度、内部一致性 |
| 创作计划 | `/checklist 创作计划` | 目标明确性、任务清晰度、计划合理性 |
| 伏笔管理 | `/checklist 伏笔管理` | 伏笔完整性、回收明确性、密度合理性 |

**使用示例**：
```
/novel.checklist 大纲质量
```

**输出示例**：
```markdown
# 大纲质量检查清单

**检查时间**: 2025-10-11 14:30
**检查对象**: outline.md
**检查维度**: 完整性、清晰度、一致性、可测量性、覆盖范围

## 完整性 (Completeness)

- [ ] CHK001 是否为每个主要情节节点定义了触发条件和结果？ [Spec §3.2]
- [x] CHK002 是否明确每个卷/章的故事目标？ [Spec §4.1] ✓
- [!] CHK003 是否覆盖所有主要角色的成长弧？ [Gap] ⚠️

## 清晰度 (Clarity)

- [ ] CHK004 情节节点的触发条件是否具体可验证？ [Ambiguity]
- [ ] CHK005 章节分配是否有明确的依据？ [Clarity]

## 一致性 (Consistency)

- [ ] CHK006 情节线索前后是否矛盾？ [Consistency]
- [x] CHK007 世界观规则是否与大纲描述一致？ [vs §世界观] ✓

## 发现的问题

### CHK003
**问题**: 配角张三的成长弧未在大纲中体现
**位置**: outline.md:45
**建议**: 在第三章补充配角的简要成长路径

## 后续行动

- [ ] 补充配角张三的成长弧设计
- [ ] 检查其他配角是否也有类似遗漏
```

#### 第二类：内容验证检查（写作后）

扫描已写章节，验证实际内容：

| 类型 | 命令 | 检查内容 |
|------|------|----------|
| 世界观一致性 | `/checklist 世界观一致性` | 扫描章节，检查设定矛盾 |
| 情节对齐 | `/checklist 情节对齐` | 对比进度与大纲 |
| 数据同步 | `/checklist 数据同步` | 验证 tracking 数据一致性 |
| 时间线 | `/checklist 时间线` | 检查时间逻辑连续性 |
| 写作状态 | `/checklist 写作状态` | 检查写作准备度和任务状态 |

**使用示例**：
```
/novel.checklist 世界观一致性
```

**输出位置**：
- 规格质量：`spec/checklists/outline-quality.md`（覆盖更新）
- 内容验证：`spec/checklists/world-consistency-20251011.md`（带日期）

**勾选方式**：
- `[ ]` - 未检查
- `[x]` - 已检查，通过
- `[!]` - 已检查，发现问题

**工作流程**：

**规划阶段（写作前）**：
1. 完成大纲、角色、世界观等规划文档
2. 运行规格质量类 checklist
3. 根据检查结果改进文档
4. 确保规划质量合格再开始写作

**写作阶段（写作中/后）**：
1. 完成章节写作
2. 定期运行内容验证类 checklist（每 5-10 章）
3. 发现并修复一致性问题
4. 保持历史记录，追踪改进

**最佳实践**：
- **双保险机制**：规划阶段验证文档，写作阶段验证内容
- **早发现早修复**：在大纲阶段就发现逻辑漏洞，避免写到后期才发现问题
- **定期检查**：每完成 5-10 章节，运行一次内容验证
- **保留历史**：内容验证类 checklist 按日期保存，可追踪问题的发现和解决过程
- **清理过期**：定期清理已解决的旧 checklist，保留关键里程碑的检查记录

**向后兼容**：
旧命令仍可用，但推荐使用统一的 `/checklist`：
- `/world-check` → `/checklist 世界观一致性`
- `/plot-check` → `/checklist 情节对齐`

**关键优势**：
1. **类比需求验证**：就像软件开发中的单元测试，为创作文档建立质量门槛
2. **分层验证**：规划文档质量 + 实际内容质量，双重保障
3. **文档化追踪**：所有检查结果保存在 `spec/checklists/`，便于回溯
4. **早期预警**：在大纲阶段就能发现逻辑漏洞，避免后期返工

---

### `/track` - 综合追踪

**用途**：全面展示小说创作的各项进度和状态

**何时使用**：每完成一个章节后

**展示内容**：
- 写作进度（字数、章节、完成率）
- 情节发展（主线进度、支线状态）
- 时间线（故事时间推进）
- 角色状态（角色发展和位置）
- 伏笔管理（埋设和回收状态）

**使用示例**：
```
/novel.track
```

**深度验证模式**（v0.6.0）：
```
/novel.track --check
```
批量检查角色名称一致性

**自动修复模式**（v0.6.0）：
```
/novel.track --fix
```
自动修复简单的角色名称错误

**最佳实践**：
- 每完成一章就更新一次
- 关注进度偏离情况
- 及时处理警告信息

---

### `/plot-check` - 情节检查

**用途**：检查情节发展的一致性和连贯性

**何时使用**：每 5-10 章定期检查

**验证内容**：
- 当前进度与大纲规划是否一致
- 已埋设的伏笔和回收计划
- 冲突升级是否符合预期节奏
- 角色发展与规划的一致性

**使用示例**：
```
/novel.plot-check
```

**最佳实践**：
- 定期而非每章都检查
- 重大剧情转折后必查
- 记录偏离原因和调整方案

---

### `/timeline` - 时间线管理

**用途**：维护和验证故事时间线

**何时使用**：涉及时间相关的情节时

**管理内容**：
- 每个章节的时间点
- 同时发生的多线剧情
- 与真实历史事件对比（历史小说）
- 时间跨度合理性检查

**使用示例**：
```
/novel.timeline
```

**最佳实践**：
- 多线并进时特别注意
- 标注关键时间节点
- 检查时间逻辑合理性

---

### `/relations` - 关系追踪

**用途**：管理和追踪角色关系变化

**何时使用**：角色关系发生重要变化时

**追踪内容**：
- 角色之间的关系图谱
- 关系的演变历程
- 势力派系的对立与合作
- 角色间的情感发展

**使用示例**：
```
/novel.relations
```

**最佳实践**：
- 重要关系变化时及时更新
- 维护关系的合理性
- 注意群体关系的影响

---

### `/world-check` - 世界观检查

**用途**：验证世界观设定的一致性

**何时使用**：引入新设定或发现矛盾时

**验证内容**：
- 规则、法则、体系的一致
- 地点、距离、方位的合理性
- 风俗、语言、传统的统一
- 能力范围和限制

**使用示例**：
```
/novel.world-check
```

**最佳实践**：
- 奇幻、科幻类特别重要
- 建立清晰的设定文档
- 重大设定变更需评估影响

---

## 专家模式命令

需要使用 `--with-experts` 初始化项目。

### `/expert` - 列出可用专家

**用途**：显示所有可用的专家顾问

**使用示例**：
```
/novel.expert
```

---

### `/expert plot` - 剧情结构专家

**专长**：
- 情节设计
- 节奏控制
- 冲突升级
- 高潮设置

**适用场景**：
- 情节感觉拖沓或混乱
- 需要设计高潮场景
- 不确定如何推进剧情

---

### `/expert character` - 人物塑造专家

**专长**：
- 人物弧光设计
- 动机分析
- 对话优化
- 性格一致性

**适用场景**：
- 角色感觉扁平
- 对话不够生动
- 人物行为不合理

---

### `/expert world` - 世界观设计专家

**专长**：
- 世界构建
- 设定一致性
- 文化背景
- 魔法/科技体系

**适用场景**：
- 构建复杂世界观
- 设定出现矛盾
- 需要丰富背景

---

### `/expert style` - 文风语言专家

**专长**：
- 叙述技巧
- 修辞手法
- 语言风格
- 文字润色

**适用场景**：
- 文字平淡乏味
- 想提升文学性
- 需要特定风格

---

## 命令使用技巧

### 1. 命令组合策略

**新建故事**：
```
/novel.constitution → /novel.specify → /novel.clarify →
/novel.plan → /novel.tasks → /novel.track-init → /novel.write
```

**定期检查**：
```
每章：/novel.track
每5-10章：/novel.plot-check
关键转折：/novel.analyze
```

**问题诊断**：
```
情节问题：/novel.plot-check → /novel.expert plot
角色问题：/novel.relations → /novel.expert character
设定问题：/novel.world-check → /novel.expert world
```

### 2. 提示词技巧

**好的提示词**：
- 清晰说明当前情况
- 明确表达修改意图
- 指定需要更新的内容
- 描述期望的输出

**示例**：
```
/novel.write 第10章

情况说明：前9章已完成主角能力觉醒和初步试探
修改意图：本章需要引入反派组织，制造紧张感
需要更新：创作第10章内容，埋下两个伏笔
期望输出：2500字，第一人称视角，悬疑氛围
```

### 3. 版本控制建议

- 重大修改前创建 Git 分支
- 定期提交关键节点
- 保留重要版本的备份
- 记录重要决策的理由

---

## 常见问题

### Q: 必须按顺序执行所有命令吗？

A: 七步方法论建议按顺序执行，但可以根据需要跳过或重复某些步骤。例如，小规模修改可能只需要 `/write` 和 `/analyze`。

### Q: 如何处理AI写作时的偏离？

A:
1. 小偏离且质量好：接受偏离，更新规格和计划
2. 大偏离：使用 `/analyze` 诊断，然后更新相应文档
3. 参考 `docs/writing/practical-guide.md` 中的实战案例

### Q: 追踪命令会很慢吗？

A: 追踪命令使用程序化验证，比完全靠 AI 分析快很多。建议每章更新，不会有明显延迟。

### Q: 专家模式和普通命令有什么区别？

A: 专家模式提供更深度的专业指导，适合遇到具体问题时使用。普通命令更注重流程和一致性。

---

## 相关文档

- [工作流程](workflow.md) - 完整创作流程说明
- [写作方法](writing-methods.md) - 6种经典写作方法
- [最佳实践](best-practices.md) - 实战经验和技巧
- [升级指南](upgrade-guide.md) - 版本升级说明
